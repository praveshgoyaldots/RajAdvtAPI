<form [formGroup]="UserForm" (ngSubmit)="saveClick();">
  <div class="row">
    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline">
        <mat-label>User Type <span style="color: red">*</span></mat-label>
        <mat-select name="UserType" [(ngModel)]="model.UserType" (selectionChange)="resetModel();"
          formControlName="UserType">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlUserType">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('UserType').hasError('required') && UserForm.get('UserType').touched)">
        User Type is <strong>required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>SSOID <span style="color: red">*</span>:</mat-label>
        <input matInput placeholder="SSO ID" [(ngModel)]="model.SSOID" maxlength="55" #SSOID
          (blur)="!UserForm.get('SSOID').invalid?getSSODetail($event):null;" formControlName="SSOID" />
        <mat-hint>{{SSOID.value.length}}/50</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('SSOID').hasError('required') && UserForm.get('SSOID').touched)">
        SSO is <strong>required!</strong>
      </mat-error>
      <mat-error
        *ngIf="(UserForm.get('SSOID').hasError('maxlength') && UserForm.get('SSOID').touched) || (UserForm.get('SSOID').hasError('maxlength'))">
        SSO field Max char limit is <strong>50!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline">
        <mat-label>Title <span style="color: red">*</span>:</mat-label>
        <mat-select name="Title" [(ngModel)]="model.Title" formControlName="Title">
          <mat-option>--Select--</mat-option>
          <mat-option value="1" *ngFor="let k of dDLList?.ddlTitle">{{k.Text}}</mat-option>
        </mat-select>

      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Title').hasError('required') && UserForm.get('Title').touched)">
        Title is <strong>required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Username <span style="color: red">*</span>:</mat-label>
        <input matInput placeholder="Username" [(ngModel)]="model.UserName" #UserName maxlength="150"
          formControlName="UserName" (blur)="!UserForm.get('UserName').invalid?isExistUser($event):null;" />
        <mat-hint>{{UserName.value.length}}/150</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('UserName').hasError('required') && UserForm.get('UserName').touched)">
        User Name is <strong>required!</strong>
      </mat-error>

    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Email <span style="color: red">*</span>:</mat-label>
        <input matInput placeholder="User Email" [(ngModel)]="model.UserEmail" #UserEmail maxlength="100"
          formControlName="UserEmail" />
        <mat-hint>{{UserEmail.value.length}}/100</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('UserEmail').hasError('required') && UserForm.get('UserEmail').touched)">
        Email is <strong>required!</strong>
      </mat-error>
      <mat-error *ngIf="(UserForm.get('UserEmail').hasError('email') && UserForm.get('UserEmail').touched)">
        Email is not in <strong>Valid fromat!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="model.ProfilePic?.length>0">
      <div class="upload-btn-wrapper">
        <label>Profile <span style="color: red">*</span>:</label>
        <!-- <input type="file" id="file" (change)="handleFileInput($event)"> -->
        <img [src]="model.ProfilePic" *ngIf="model.ProfilePic!=null" height="50px" width="50px" />
      </div>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="(model.UserType!=userTypes.MNSTR) && (model.UserType!=userTypes.ADM)">
      <mat-form-field appearance="outline">
        <mat-label>Designation <span style="color: red">*</span>:</mat-label>
        <mat-select name="Designation" [(ngModel)]="model.Designation" formControlName="Designation">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlDesignation">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Designation').hasError('required') && UserForm.get('Designation').touched)">
        Designation is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline">
        <mat-label>Gender <span style="color: red">*</span></mat-label>
        <mat-select name="Gender" [(ngModel)]="model.Gender" formControlName="Gender">
          <mat-option (click)="toggleAllSelection($event)">--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlGender">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Gender').hasError('required') && UserForm.get('Gender').touched)">
        Gender is <strong>Required!</strong>
      </mat-error>

    </div>


    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Mobile <span style="color: red">*</span>:</mat-label>
        <input matInput placeholder="Mobile" [(ngModel)]="model.Mobile" #Mobile maxlength="10"
          (keypress)="numberOnly($event)" formControlName="Mobile" />
        <mat-hint>{{Mobile.value.length}}/10</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Mobile').hasError('required') && UserForm.get('Mobile').touched)">
        Mobile is <strong>Required!</strong>
      </mat-error>
      <mat-error *ngIf="(UserForm.get('Mobile').hasError('maxlength') && UserForm.get('Mobile').touched)">
        Mobile field Max char limit is <strong>10!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>Landline No :</mat-label>
        <input matInput placeholder="Landline No." [(ngModel)]="model.LandlineNo" #LandlineNo maxlength="10"
          (keypress)="numberOnly($event,true)" formControlName="LandlineNo" />
        <mat-hint>{{LandlineNo.value.length}}/10</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('LandlineNo').hasError('maxlength') && UserForm.get('LandlineNo').touched)">
        Landline Nnumber field Max char limit is <strong>50!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline" class="example-full-width">
        <mat-label>IP No. :</mat-label>
        <input matInput placeholder="IP number" [(ngModel)]="model.IPNo" #IPNumber maxlength="6"
          (keypress)="numberOnly($event)" formControlName="IPNo" />
        <mat-hint>{{IPNumber.value.length}}/6</mat-hint>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('IPNo').hasError('maxlength') && UserForm.get('IPNo').touched)">
        IP number field Max char limit is <strong>6!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="(model.UserType==userTypes.CMOS||model.UserType==userTypes.CMOO)">
      <mat-form-field appearance="outline">
        <mat-label>Group <span style="color: red">*</span>:</mat-label>
        <mat-select name="Group" [(ngModel)]="model.Group" formControlName="Group"
          (selectionChange)="getFilterdDDL($event,'ddlDepartment','ddlUserGroup');">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlUserGroup">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Group').hasError('required') && UserForm.get('Group').touched)">
        Group is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">
      <!-- *ngIf="(model.UserType==userTypes.DPTO||model.UserType==userTypes.DPTS||model.UserType==userTypes.DLO|| model.UserType==userTypes.TLO||model.UserType==userTypes.MNSTR||model.UserType==userTypes.DPTOFCA||model.UserType==userTypes.DPTOFCS)"> -->
      <mat-form-field appearance="outline">
        <mat-label>Admin Department <span style="color: red">*</span>:</mat-label>
        <!-- <mat-select name="AdminDepartment" [(ngModel)]="AdminDepartment" multiple
          (selectionChange)="getFilterdDDL($event,'ddlDepartment','ddlAdminDepartment');"
          formControlName="AdminDepartment"> -->
          <mat-select name="AdminDepartment" [(ngModel)]="AdminDepartment" multiple
          (selectionChange)="getDepartmentByadmDepartment($event.value)"
          formControlName="AdminDepartment">
          <!-- <mat-option disabled="disabled" (click)="selectADMAll()">
            <mat-checkbox [disabled]="true" [checked]="selectedAll>0 || model?.ADMDepartment?.length==ddlAdminDepartment?.length"> SelectAll </mat-checkbox>
          </mat-option> -->
          <mat-option disabled="disabled" (click)="selectADMAll()">
            <mat-checkbox [disabled]="true"
              [checked]="selectedDptAll>0 || AdminDepartment?.length==dDLList?.ddlUserAdminDepartment?.length"> SelectAll
            </mat-checkbox>
          </mat-option>
          <!-- <mat-option value="{{k.AdmDepartmentCode}}" *ngFor="let k of ddlAdminDepartment">{{k.AdmDepartmentTitle}}
          </mat-option> -->
          <mat-option value="{{ k.Value }}" *ngFor="let k of dDLList?.ddlUserAdminDepartment">{{ k.Text }}
          </mat-option>
        </mat-select>

      </mat-form-field>
      <mat-error
        *ngIf="(UserForm.get('AdminDepartment').hasError('required') && UserForm.get('AdminDepartment').touched)">
        Admin Department is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12">

      <mat-form-field appearance="outline">
        <mat-label> Department <span style="color: red">*</span>:</mat-label>
        <mat-select name="Department" [(ngModel)]="model.Department" multiple formControlName="Department"
          (ngModelChange)="getOfficeList($event)">
          <mat-option disabled="disabled" (click)="selectAll()">
            <mat-checkbox [disabled]="true"
              [checked]="selectedAll>0 || model?.Department?.length==ddlloginDepartment?.length"> SelectAll
            </mat-checkbox>
          </mat-option>
          <!-- <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlDepartment">{{k.Text}}</mat-option> -->
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlloginDepartment">{{k.Text}}</mat-option> 
        </mat-select>

        <mat-select name="Department" [(ngModel)]="model.Department" multiple formControlName="Department"
          (ngModelChange)="getOfficeList($event)"
          *ngIf="(model.UserType==userTypes.DLS || model.UserType==userTypes.DLO || model.UserType==userTypes.BLO)">

          <!-- <mat-checkbox  [disabled]="true" [checked]="selectedAll>0 || model?.Department?.length==ddlDepartment?.length"> SelectAll </mat-checkbox> -->
          <mat-option disabled="disabled" (click)="selectAll()">
            <mat-checkbox [disabled]="true"
              [checked]="selectedAll>0 || model?.Department?.length==ddlloginDepartment?.length">
              SelectAll </mat-checkbox>
          </mat-option>
          <!-- <mat-option value="{{k.DepartmentCode}}" *ngFor="let k of ddlDepartment">{{k.DepartmentTitle}}</mat-option> -->
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlloginDepartment">{{k.Text}}</mat-option> 
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Department').hasError('required') && UserForm.get('Department').touched)">
        Department is <strong>Required!</strong>
      </mat-error>
    </div>



    <div class="col l6 xl6 m6 s12">
      <mat-form-field appearance="outline">
        <mat-label>Office <span style="color: red">*</span>:</mat-label>
        <mat-select name="Office" [(ngModel)]="model.OfficeCode" formControlName="Office"
          (selectionChange)="getDistrictByoffice($event.value)">

          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlOffice">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Office').hasError('required') && UserForm.get('Office').touched)">
        Office is <strong>required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12"
      *ngIf="(model.UserType==userTypes.DCOM||model.UserType==userTypes.COLL||model.UserType==userTypes.TEHDR||model.UserType==userTypes.BDO||model.UserType==userTypes.MLAMP)">
      <mat-form-field appearance="outline">
        <mat-label>Division <span style="color: red">*</span>:</mat-label>
        <mat-select name="Division" [(ngModel)]="model.Division" multiple formControlName="Division"
          (selectionChange)="model.UserType!=userTypes.DCOM? getFilterdDDL($event,'ddlDistrict','ddlDivision'): null;">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlDivision">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Division').hasError('required') && UserForm.get('Division').touched)">
        Division is <strong>Required!</strong>
      </mat-error>

    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="(model.UserType!=userTypes.ADM)">

      <mat-form-field appearance="outline">
        <mat-label>District <span style="color: red">*</span>:</mat-label>
        <mat-select name="District" [(ngModel)]="model.District" formControlName="District"
          (selectionChange)="getBlockByDistrict($event.value)">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlDistricByOffice">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('District').hasError('required') && UserForm.get('District').touched)">
        District is <strong>Required!</strong>
      </mat-error>

    </div>

    <!-- <div class="col l6 xl6 m6 s12"
      *ngIf="model.UserType==userTypes.COLL||model.UserType==userTypes.TEHDR ||model.UserType==userTypes.BDO ||model.UserType==userTypes.BLO  ||model.UserType==userTypes.DLS ||model.UserType==userTypes.MLAMP ||model.UserType==userTypes.DLO">

      <mat-form-field appearance="outline">
        <mat-label>District <span style="color: red">*</span>:</mat-label>

        <mat-select name="District" [(ngModel)]="model.District" multiple formControlName="District"
        (selectionChange)="getBlockByDistrict($event.value)">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.DistrictCode}}" *ngFor="let k of ddlDistrict">{{k.DistrictTitle}}</mat-option>


        </mat-select>

      </mat-form-field >
      <mat-error *ngIf="(UserForm.get('District').hasError('required') && UserForm.get('District').touched)">
        District is <strong>Required!</strong>
      </mat-error>
    </div> -->


    <div class="col l6 xl6 m6 s12" *ngIf="model.UserType==userTypes.BDO ||model.UserType==userTypes.BLO">
      <mat-form-field appearance="outline">
        <mat-label>Block <span style="color: red">*</span>:</mat-label>
        <mat-select name="Block" [(ngModel)]="model.Block" multiple formControlName="Block">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlBlockByDistrict">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Block').hasError('required') && UserForm.get('Block').touched)">
        Block is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="model.UserType==userTypes.TEHDR ||model.UserType==userTypes.BLO">
      <mat-form-field appearance="outline">
        <mat-label>Tehsil <span style="color: red">*</span>:</mat-label>
        <mat-select name="Tehsil" [(ngModel)]="model.Tehsil" multiple formControlName="Tehsil">
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of ddlTahsilByBlock">{{k.Text}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error *ngIf="(UserForm.get('Tehsil').hasError('required') && UserForm.get('Tehsil').touched)">
        Tehsil is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="model.UserType==userTypes.MLAMP">
      <mat-form-field appearance="outline">
        <mat-label>Parliament Constituancy <span style="color: red">*</span>:</mat-label>
        <mat-select name="ParliamentConstituancy" [(ngModel)]="model.ParConstituancy"
          (selectionChange)="getFilterdDDL($event,'ddlAssemblyConstituency','ddlParliamentConstituency');"
          formControlName="ParConstituancy" multiple>
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlParliamentConstituency">{{k.Text}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error
        *ngIf="(UserForm.get('ParConstituancy').hasError('required') && UserForm.get('ParConstituancy').touched)">
        Parliament Constituancy is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="col l6 xl6 m6 s12" *ngIf="model.UserType==userTypes.MLAMP">
      <mat-form-field appearance="outline">
        <mat-label>Assembly Constituancy <span style="color: red">*</span>:</mat-label>
        <mat-select name="AssConstituancy" [(ngModel)]="model.AssConstituancy" formControlName="AssConstituancy"
          multiple>
          <mat-option>--Select--</mat-option>
          <mat-option value="{{k.Value}}" *ngFor="let k of dDLList?.ddlAssemblyConstituency">{{k.Text}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-error
        *ngIf="(UserForm.get('AssConstituancy').hasError('required') && UserForm.get('AssConstituancy').touched)">
        Assembly Constituancy is <strong>Required!</strong>
      </mat-error>
    </div>

    <div class="row w-100">
    <div class="col l16 x6 m6 s12">
      <button type="submit" mat-button class="btn-submit">Submit</button>
    </div>

    <div class="col l16 x6 m6 s12 text-right">
      <a (click)="openDepartmentDialog()" class="btn-submit btn_green mat-button text-white btn-view-dept"> View Department List <mat-icon>list</mat-icon> </a>
    </div>
    </div>
  


  </div>
</form>


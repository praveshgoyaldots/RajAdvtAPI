<!-- <app-global-list-search [SearchFields]="ViewSearchColumns" (onSearch)="SearchByKeyword($event)">
</app-global-list-search> -->


<div class="row m-0">
</div>

<div class="row">
  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>SSOID</mat-label>
      <input matInput placeholder="SSOID" [(ngModel)]="searchModel.SSOID" #SSOID />
    </mat-form-field>

  </div>
  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>UserType</mat-label>
      <mat-select name="Userby" [(ngModel)]="searchModel.UserTypes">
        <mat-option>--Select--</mat-option>
        <mat-option value="{{k.Value}}" *ngFor="let k of ddlUserType"> {{k.Text}}</mat-option>
      </mat-select>
    </mat-form-field>


  </div>
  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>User Active/De-Active</mat-label>
      <mat-select name="Activeview" [(ngModel)]="searchModel.Activeview">
        <!-- <mat-option>--Select--</mat-option> -->
        <mat-option [value]="-1">All</mat-option>
        <mat-option [value]="1">Active</mat-option>
        <mat-option [value]="0">DeActive</mat-option>
      </mat-select>
    </mat-form-field>

  </div>

  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Office Active/De-Active</mat-label>
      <mat-select name="OfficeActiveview" [(ngModel)]="searchModel.OfficeActiveview">
        <!-- <mat-option>--Select--</mat-option> -->
        <mat-option [value]="-1">All</mat-option>
        <mat-option [value]="1">Active</mat-option>
        <mat-option [value]="0">DeActive</mat-option>
      </mat-select>
    </mat-form-field>

  </div>

  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>User Name</mat-label>
      <input matInput placeholder="UserName" [(ngModel)]="searchModel.UserName" #UserName />
    </mat-form-field>

  </div>




  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Mobile</mat-label>
      <input matInput placeholder="Mobile" [(ngModel)]="searchModel.Mobile" #Mobile />
    </mat-form-field>

  </div>


  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Email</mat-label>
      <input matInput placeholder="Email" [(ngModel)]="searchModel.Email" #Email />
    </mat-form-field>

  </div>

  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Department</mat-label>
      <mat-select name="DepartmentCode" [(ngModel)]="searchModel.DepartmentCode">
        <!-- <mat-option disabled="disabled" (click)="selectAll()">
          <mat-checkbox [disabled]="true"
            [checked]="selectedAll>0 || searchModel?.DepartmentCode?.length==ddlDepartment?.length"> SelectAll
          </mat-checkbox>
        </mat-option>-->
        <mat-option value="{{k.DepartmentCode}}" *ngFor="let k of  ddlDepartment">{{k.DepartmentTitle}}</mat-option>
      </mat-select>
    </mat-form-field>

  </div>

  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Office</mat-label>
      <mat-select name="OfficeCode" [(ngModel)]="searchModel.OfficeCode">
        <mat-option>--Select--</mat-option>
        <mat-option value="{{k.OfficeCode}}" *ngFor="let k of  ddlOffice">{{k.OfficeName}}</mat-option>
      </mat-select>
    </mat-form-field>

  </div>
  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>District</mat-label>
      <mat-select name="DistrictCode" [(ngModel)]="searchModel.DistrictCode">
        <mat-option>--Select--</mat-option>
        <mat-option value="{{k.DistrictCode}}" *ngFor="let k of  ddlDistrict">{{k.DistrictTitle}}</mat-option>
      </mat-select>
    </mat-form-field>

  </div>

  <div class="col l6 xl4 m4 s6">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>From Date</mat-label>
      <input matInput [matDatepicker]="picker1" (focus)="picker1.open()" readonly placeholder="From Date"
        [(ngModel)]="fromDate" [max]="toDate">
      <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
      <mat-datepicker #picker1></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="col l6 xl4 m4 s4">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>To Date</mat-label>
      <input matInput [matDatepicker]="picker2" (focus)="picker2.open()" readonly placeholder="To Date"
        [(ngModel)]="toDate" [min]="fromDate">
      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
      <mat-datepicker #picker2></mat-datepicker>
    </mat-form-field>
  </div>
  <div class="col l6 xl4 m4 s4">
    <section class="example-full-width" appearance="outline">
      <mat-label>Is Show User With Specific Permission </mat-label>
      <mat-checkbox [(ngModel)]="searchModel.IsShowUserWithSpecificPermission" #IsShowUserWithSpecificPermission>
      </mat-checkbox>
    </section>
  </div>
  <div class="col l6 xl4 m4 s6">
    <mat-form-field class="example-full-width" appearance="outline">
      <mat-label>Keyword</mat-label>
      <input matInput placeholder="KeywordSearch" [(ngModel)]="searchModel.KeywordSearch" #KeywordSearch />
    </mat-form-field>
  </div>
</div>

<div class="row">
  <div class="col l12 xl12 m12 s12 ">
    <button (click)="getList()" mat-button class="btn-submit btn_green mr-5">Search</button>




    <!-- &nbsp;
        <button (click)="print()" mat-button class="btn-submit">Print Report</button> -->

    <button (click)="Reset()" mat-button class="btn-submit btn_orange mat-button  mr-5">Reset<mat-icon>refresh
      </mat-icon>
    </button>


    <button (click)="downloadCsv()" mat-button class="btn-submit mat-button float-right">Export to Excel <mat-icon>
        report</mat-icon></button>
  </div>

</div>


<div class="row">
  <div class="col l12 s12 p-0">

    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="sortData($event)"
      class="mat-elevation-z8 table-dept-user" id="test">


      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef>S.No / <br> User Id
        </th>
        <td mat-cell *matCellDef="let element; let i = index;">{{(indexModel.Page-1)*indexModel.PageSize +(i+1)}}
          / <br> {{element.UserId}}
        </td>
      </ng-container>

      <ng-container matColumnDef="UserName">
        <th mat-header-cell *matHeaderCellDef style="width: 20%;">Name/ <br />SSOID</th>
        <td mat-cell *matCellDef="let element; let i = index;" style="width: 20%;">
          {{element.UserName}}<span>/<br></span>{{element.SSOID}} </td>
      </ng-container>

      <ng-container matColumnDef="OfficeName">
        <th mat-header-cell *matHeaderCellDef style="width: 20%;">User Type/ <br />OfficeName / <br /> District</th>
        <td mat-cell *matCellDef="let element; let i = index;" style="width: 20%;">
          {{element.UserTypeTitle != null ? element.UserTypeTitle : "--"}}<span>/<br></span>{{element.OfficeName != null
          ? element.OfficeName : "--"}}
          <span>/<br></span>{{element.DistrictNames != null ? element.DistrictNames : "--"}}
        </td>
      </ng-container>

      <ng-container matColumnDef="SpecificPermissionCount">
        <th mat-header-cell *matHeaderCellDef> Number Of specific permissions </th>
        <td mat-cell *matCellDef="let transaction"><a class="cmis-ent-num"
            (dblclick)="viewPermission(transaction.UserId)"> {{transaction.SpecificPermissionCount}} </a> </td>
      </ng-container>
      <!-- <ng-container matColumnDef="SpecificPermissionCount">
        <th mat-header-cell *matHeaderCellDef> Number Of Entries CMIS </th>
        <td mat-cell *matCellDef="let transaction"><a  class="cmis-ent-num" (dblclick)="viewPermission(transaction.UserId)"> {{transaction.SpecificPermissionCount}} </a> </td>
      </ng-container> -->

      <ng-container [matColumnDef]="column.Value" *ngFor="let column of ViewdisplayedColumns">

        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.Text}} </th>
        <td mat-cell *matCellDef="let element"> {{element[column.Value]}} </td>
      </ng-container>

      <ng-container matColumnDef="UserIsActive">
        <th mat-header-cell *matHeaderCellDef> Active Status </th>
        <td mat-cell *matCellDef="let element" class="action-link toogle-btn">
          <a *ngIf="Permission.UpdatePageAccess" (click)="updateActiveStatus(element.UserId)"
            title="Update Active Status">
            <mat-icon *ngIf="element.UserIsActive" style="cursor:pointer;color: #74cb74;">toggle_on</mat-icon>
            <mat-icon *ngIf="!element.UserIsActive" style="cursor:pointer;color: #ff7373;">toggle_off</mat-icon>
          </a>
          <a *ngIf="!Permission.UpdatePageAccess" title="Active Status">
            <mat-icon *ngIf="element.UserIsActive" style="cursor:pointer;color: #74cb74;">toggle_on</mat-icon>
            <mat-icon *ngIf="!element.UserIsActive" style="cursor:pointer;color: #ff7373;">toggle_off</mat-icon>
          </a>
        </td>
      </ng-container>

      <ng-container matColumnDef="Action">
        <th mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let element" style="cursor:pointer;" class="action-link">
          <a *ngIf="Permission.DeletePageAccess" (click)="updateDeleteStatus(element.UserId)" title="Delete">
            <mat-icon>delete</mat-icon>
          </a>
          <a *ngIf="Permission.DetailPageAccess" routerLink="detail/{{element.UserId}}" title="Detail">
            <mat-icon>visibility</mat-icon>
          </a>
          <a *ngIf="Permission.UpdatePageAccess" routerLink="update/{{element.UserId}}" title="Update">
            <mat-icon>edit</mat-icon>
          </a>
          <a *ngIf="this.loginData.UserType=='SADM'" (click)="resetUserSpecificPermission(element.UserId)"
            title="Delete Specific permission">
            <mat-icon>refresh</mat-icon>
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
    </table>


    <mat-paginator #paginator [length]="totalRecords" [pageSize]="indexModel.PageSize"
      [pageSizeOptions]="[10, 20, 50,100,totalRecords]" (page)="onPaginateChange($event)" showFirstLastButtons>
    </mat-paginator>
  </div>
</div>
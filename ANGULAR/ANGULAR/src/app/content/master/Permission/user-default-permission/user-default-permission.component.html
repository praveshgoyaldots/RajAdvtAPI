<div class="row m-0">
  <!-- <div class="col l6 xl6 m6 s12">
        <mat-form-field  appearance="outline">
            <mat-label>Application </mat-label>
            <mat-select name="Application" [(ngModel)]="Application"
                (selectionChange)="BindDefaultPagePermissionList()">
                <mat-option value>--Select--</mat-option>
                <mat-option value="{{k.Value}}" *ngFor="let k of dropdownList?.ddlApplicationType">{{k.Text}}
                </mat-option>
            </mat-select>
        </mat-form-field>
    </div> -->
  <div class="col l6 xl6 m6 s12">
    <mat-form-field appearance="outline">
      <mat-label>User Type </mat-label>
      <mat-select name="UserType" [(ngModel)]="UserType" (selectionChange)="BindDefaultPagePermissionList()">
        <mat-option value>--Select--</mat-option>
        <mat-option value="{{k.Value}}" *ngFor="let k of dropdownList?.ddlUserType">{{k.Text}}</mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div class="col l6 xl6 m6 s12"  *ngIf="UserType">
  <button mat-button class="btn-submit" (click)="viewPermissions();">View Permission</button>
</div>
</div>

<div class="row">
  <div class="col l12 s12">
    <table mat-table [dataSource]="dataSource" class="mat-elevation-z8" *ngIf="defaultPagePermissionList.length > 0">
      <ng-container matColumnDef="s_no">
        <th mat-header-cell *matHeaderCellDef> S.No. </th>
        <td mat-cell *matCellDef="let row; let i = index;">{{i+1}}</td>
      </ng-container>

      <ng-container matColumnDef="ApplicationCode">
        <th mat-header-cell *matHeaderCellDef>Application Name</th>
        <td mat-cell *matCellDef="let row">{{row.ApplicationCode}}</td>
      </ng-container>

      <ng-container matColumnDef="PageTypeName">
        <th mat-header-cell *matHeaderCellDef>Page Type Name</th>
        <td mat-cell *matCellDef="let row">{{row.PageTypeName}}</td>
      </ng-container>


      <ng-container matColumnDef="permission_name">
        <th mat-header-cell *matHeaderCellDef>Permission Name</th>
        <td mat-cell *matCellDef="let row">{{row.PageTitle}}</td>
      </ng-container>

      <ng-container matColumnDef="add_permission">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox [(ngModel)]="IsHeaderAddSelected" (change)="CheckUncheckAll('Add')"></mat-checkbox>
          Add
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox [(ngModel)]="row.AddPermission" (change)="IsAllSelected('Add')"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="edit_permission">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox [(ngModel)]="IsHeaderEditSelected" (change)="CheckUncheckAll('Edit')"></mat-checkbox>
          Edit
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox [(ngModel)]="row.EditPermission" (change)="IsAllSelected('Edit')"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="delete_permission">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox [(ngModel)]="IsHeaderDeleteSelected" (change)="CheckUncheckAll('Delete')">
          </mat-checkbox>
          Delete
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox [(ngModel)]="row.DeletePermission" (change)="IsAllSelected('Delete')"></mat-checkbox>
        </td>
      </ng-container>

      <ng-container matColumnDef="view_permission">
        <th mat-header-cell *matHeaderCellDef>
          <mat-checkbox [(ngModel)]="IsHeaderViewSelected" (change)="CheckUncheckAll('View')"></mat-checkbox>
          View
        </th>
        <td mat-cell *matCellDef="let row">
          <mat-checkbox [(ngModel)]="row.ViewPermission" (change)="IsAllSelected('View')"></mat-checkbox>
        </td>
      </ng-container>
      <ng-container matColumnDef="Action">
        <th mat-header-cell *matHeaderCellDef>
         Action
        </th>
        <td mat-cell *matCellDef="let row">
          <a  (click)="viewPermission(row.PageCode,row.PageTitle)" title="View Permission">
            <mat-icon>visibility</mat-icon>
          </a>
          <a (click)="openPageManual(row.MenuTitle);" *ngIf="row?.isUserMAnual" title="User Manual">
            <mat-icon>slideshow</mat-icon>
          </a>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
    </table>
    <ng-container *ngIf="defaultPagePermissionList.length === 0">
      No permission found.
    </ng-container>
  </div>
  <div class="col l12 x8 m4 s12 clearfix mt-20" style="margin-top: 20px !important;"
    *ngIf="defaultPagePermissionList.length > 0">
    <button mat-button class="btn-submit" (click)="SavePermissions();">Submit</button>
  </div>
</div>

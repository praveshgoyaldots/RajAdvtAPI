
<app-global-list-search [SearchFields]="ViewdisplayedColumns" (onSearch)="SearchByKeyword($event)">
</app-global-list-search>



<!-- department button click -->
<div class="row">

  <div class="col l6 xl6 m6 s12 text-right" style="padding-top: 6px;">
      <mat-label class="mr-5">Get Active De-Active Data</mat-label>
      <mat-radio-group class="radio_grp" aria-label="Select an option" [(ngModel)]="isActive">
        <mat-radio-button  [value]="1" (change)="getActiveDeActiveData(1)" [checked]="isActive==1">Active</mat-radio-button>
        <mat-radio-button [value]="0" (change)="getActiveDeActiveData(0)">De-Active</mat-radio-button>
        <mat-radio-button [value]="-1" (change)="getActiveDeActiveData(-1)">Both</mat-radio-button>
      </mat-radio-group>
    </div>
<div class="col l6 xl6 m6 s6" style="display: inline-flex;">
    <div >
  <button (click)="printDepartment('deptschemereport');" mat-button class="btn-submit btn_green">Department Scheme Report</button>
    </div>
    <div  style="margin-left: 10px;">
        <button (click)="printDepartment('deptreport');" mat-button class="btn-submit btn_green">Department Report</button>
          </div>
    </div>

</div>

<!-- end -->


<!-- <alert ></alert> -->
<div class="row">
  <div class="col l12 s12 p-0">
      <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z8"  (matSortChange)="sortData($event)">

                       <ng-container matColumnDef="index">
              <th mat-header-cell *matHeaderCellDef>#</th>
              <td mat-cell *matCellDef="let element; let i = index;">{{(indexModel.Page-1)*indexModel.PageSize +(i+1)}}</td>
            </ng-container>
            <ng-container matColumnDef="Code">
              <th mat-header-cell *matHeaderCellDef>Department Code</th>
              <td mat-cell *matCellDef="let element; let i = index;">{{element.DepartmentCode}}</td>
            </ng-container>
            <ng-container matColumnDef="DepartmentTitleHindi">
                <th mat-header-cell *matHeaderCellDef>Display Name(Department Name Hindi)</th>
                <td mat-cell *matCellDef="let element">
                  {{element.DisplayName}}
                  <span *ngIf="element.DepartmentTitleHindi" style="color: #2922a2; font-weight: bold;">({{element.DepartmentTitleHindi}})</span>
                </td>
              </ng-container>
        <ng-container [matColumnDef]="column.Value" *ngFor="let column of ViewdisplayedColumns">

          <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.Text}} </th>
          <td mat-cell *matCellDef="let element"> {{element[column.Value]}} </td>
        </ng-container>

        <ng-container matColumnDef="DepartmentIsActive">
          <th mat-header-cell *matHeaderCellDef> Active Status </th>
          <td mat-cell *matCellDef="let element" class="action-link toogle-btn">
            <a *ngIf="this.Permission.UpdatePageAccess" (click)="OnStatusClick(element.DepartmentId)"
              title="Update Active Status">
              <mat-icon *ngIf="element.DepartmentIsActive" style="cursor:pointer;color: #74cb74;">toggle_on</mat-icon>
              <mat-icon *ngIf="!element.DepartmentIsActive" style="cursor:pointer;color: #ff7373;">toggle_off</mat-icon>
            </a>
            <a *ngIf="!this.Permission.UpdatePageAccess" title="Active Status">
              <mat-icon *ngIf="element.DepartmentIsActive" style="cursor:pointer;color: #74cb74;">toggle_on</mat-icon>
              <mat-icon *ngIf="!element.DepartmentIsActive" style="cursor:pointer;color: #ff7373;">toggle_off</mat-icon>
            </a>
          </td>
        </ng-container>

        <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element" class="action-link">
                <a *ngIf="this.Permission.UpdatePageAccess" routerLink="/master/DepartmentMasteradd/{{ element.DepartmentId }}" title="Edit"
                  class="btn_list">
                  <mat-icon>edit</mat-icon>
                </a>
                <a *ngIf="(element.DepartmentMenuCount==0 || element.DepartmentSectionCount==0 )&& this.Permission.Custome1PageAccess" (click)="TransferMenu(element.DepartmentCode)"
                 title="{{element.DepartmentMenuCount==0?'Transfer all Menu Classification into Department Menu':''}} {{element.DepartmentMenuCount==0 && element.DepartmentSectionCount==0 ? 'and' : ''}} {{element.DepartmentSectionCount==0?'Mapped home page section with Department':''}}"
                class="btn_list">
                <mat-icon>send</mat-icon>
              </a>
              <a *ngIf="(element.DepartmentSubMenuCount==0 )&& this.Permission.Custome1PageAccess" (click)="TransferDptMenuToDepartmentSubMenu(element.DepartmentCode)"
              title="Transfer Department Menu To Department Sub Menu"
            >
             <mat-icon>send</mat-icon>
           </a>
      </ng-container>

        <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
        <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
      </table>
      <mat-paginator #paginator [length]="totalRecords" [pageSize]="indexModel.PageSize"
      [pageSizeOptions]="[10, 20, 50,100,totalRecords]" (page)="onPaginateChange($event)" showFirstLastButtons
      *ngIf="totalRecords!=0">
    </mat-paginator>

  </div>
</div>



<!-- Department Report table START-->

<div class="col l12 m12 s12"  style="display: none;">
  <table class="table table_custom new_table table_border" id="deptreport">
      <thead>
          <tr>
              <th scope="col">Sr.No</th>
              <th scope="col">Department Title</th>
              <th scope="col">Department Code</th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let item of departmentReportList; let i = index" [attr.data-index]="i">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ item.DepartmentTitle }}</td>
              <td>{{ item.DepartmentCode }}</td>
          </tr>
      </tbody>
  </table>
</div>

<!-- Department Report table END-->

<!-- Department Scheme Report table START-->

<div class="col l12 m12 s12" style="display: none;">
  <table class="table table_custom new_table table_border" id="deptschemereport">
      <thead>
          <tr>
              <th scope="col">Sr.No</th>
              <th scope="col">Scheme</th>
              <th scope="col">Scheme Id</th>
              <th scope="col">Department</th>
              <th scope="col">Department Code</th>
          </tr>
      </thead>
      <tbody>
          <tr *ngFor="let item of departmentSchemeReportList; let i = index" [attr.data-index]="i">
              <th scope="row">{{ i + 1 }}</th>
              <td>{{ item.NameEnglish }}</td>
              <td>{{ item.Id }}</td>
              <td>{{ item.NodalDepartmentTitle }}</td>
              <td>{{ item.NodelDepartmentCode }}</td>
          </tr>
      </tbody>
  </table>
</div>

<!-- Department Scheme Report table END-->




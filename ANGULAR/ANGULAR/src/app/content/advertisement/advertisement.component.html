<div class="row">
  <div class="col l12 s12 p-0">
    <table mat-table [dataSource]="dataSource" matSort (matSortChange)="SortData($event)" class="mat-elevation-z8">


      <ng-container matColumnDef="index">
        <th mat-header-cell *matHeaderCellDef>#</th>
        <td mat-cell *matCellDef="let element; let i = index;">
            {{(indexModel.Page-1)*indexModel.PageSize +(i+1)}}</td>
    </ng-container>

      <ng-container [matColumnDef]="column.Value" *ngFor="let column of ViewdisplayedColumns">

        <th mat-header-cell *matHeaderCellDef mat-sort-header> {{column.Text}} </th>
        <td mat-cell *matCellDef="let element"> {{element[column.Value]}} </td>
      </ng-container>

      <ng-container matColumnDef="ModifiedDate">
          <th mat-header-cell *matHeaderCellDef mat-sort-header> Entry Date </th>
          <td mat-cell *matCellDef="let group" class="action-link toogle-btn">
            {{ group.ModifiedDate !=null ? (group.ModifiedDate | date: 'dd/MM/yyyy') :'--' }}
          </td>
        </ng-container>

      <ng-container matColumnDef="Status">
        <th mat-header-cell *matHeaderCellDef> Status </th>
        <td mat-cell *matCellDef="let group" class="action-link">

          <div  *ngIf="!group.IsActive && !IsExpired(group.ExpiryDate) && this.Permission.UpdatePageAccess && !group.IsLock" >
            <button mat-button class="btn-submit " style=" background-color: #ff7373;color: black;" (click)="AdverisementStatus(group.Id);">Not Publish</button>
          </div>
          <div  *ngIf="!group.IsActive && !IsExpired(group.ExpiryDate) && !this.Permission.UpdatePageAccess" >
            <span><button mat-button class="btn-submit" (click)="AdverisementStatus(group.Id);">Not Publish</button></span>
          </div>
          <div  *ngIf="!group.IsActive && !IsExpired(group.ExpiryDate) && this.Permission.UpdatePageAccess && group.IsLock" >
              <button mat-button class="btn-submit" (click)="AdverisementStatus(group.Id);">Not Publish</button>
          </div>

       <span *ngIf="group.IsActive"> <button mat-button class="btn-submit"  (click)="AdverisementStatus(group.Id);">Published</button> </span>
       <span *ngIf="!group.IsActive && IsExpired(group.ExpiryDate)"><button mat-button class="btn-submit" style=" background-color: #ff7373;color: black;" (click)="AdverisementStatus(group.Id);">Not Published</button></span>

       <span *ngIf="IsExpired(group.ExpiryDate)"> expired </span>

        </td>
      </ng-container>
      <ng-container matColumnDef="Lock">

          <th mat-header-cell *matHeaderCellDef>Lock Record</th>
          <td mat-cell *matCellDef="let group" class="toogle-btn">

            <div *ngIf="!this.Permission.UpdatePageAccess">
              <ng-container>
                <mat-icon class="toggle_on" *ngIf="group.IsLock" style="cursor:pointer;">toggle_on</mat-icon>
                <mat-icon class="toggle_off" *ngIf="!group.IsLock" style="cursor:pointer;">toggle_off</mat-icon>

             </ng-container>

            </div>
            <div *ngIf="this.Permission.UpdatePageAccess" >
              <ng-container> <a href="JavaScript:Void(0);" (click)="lockClick(group.Id)">

                <mat-icon class="toggle_on" *ngIf="group.IsLock" style="cursor:pointer;">toggle_on</mat-icon>
                <mat-icon class="toggle_off" *ngIf="!group.IsLock" style="cursor:pointer;">toggle_off</mat-icon>
              </a> </ng-container>
            </div>
          </td>
        </ng-container>
      <ng-container matColumnDef="Action">
        <th  width="130" mat-header-cell *matHeaderCellDef> Action </th>
        <td mat-cell *matCellDef="let group" class="action-link" >
            <a class="btn_delete" *ngIf="this.Permission.DeletePageAccess"  routerLink="delete/{{group.Id}}" title="Delete"  class="btn_delete">
              <mat-icon>delete</mat-icon>
            </a>

            <a class="btn_edit" *ngIf="this.Permission.UpdatePageAccess"  routerLink="update/{{group.Id}}" title="Edit"  class="btn_edit" >
              <mat-icon>edit</mat-icon>
            </a>

          <a class="btn_list" *ngIf="this.Permission.DetailPageAccess" routerLink="detail/{{group.Id}}" title="Detail"  class="btn_list">
            <mat-icon>list</mat-icon>
          </a>


        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
      <tr mat-row *matRowDef="let row; columns: columnsToDisplay;"></tr>
    </table>

    <mat-paginator #paginator [length]="totalRecords" [pageSize]="indexModel.PageSize" [pageSizeOptions]="[5,10, 20, 50,totalRecords]"
    (page)="onPaginateChange($event)" showFirstLastButtons>
  </mat-paginator>

  </div>


</div>
